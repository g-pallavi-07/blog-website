<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Authentication</title>
  <link rel="stylesheet" href="css/style.css" />

</head>
<body>

  <h2 id="formTitle">Sign In</h2>

  <div class="toggle-btns">
    <button id="signInBtn" class="active">Sign In</button>
    <button id="signUpBtn">Sign Up</button>
  </div>

  <form id="authForm">
    <input type="email" id="email" placeholder="Email" required />
    <input type="password" id="password" placeholder="Password (min 6 chars)" minlength="6" required />
    <button type="submit">Submit</button>
  </form>

  <p class="message" id="message"></p>

  <script>
    const signInBtn = document.getElementById('signInBtn');
    const signUpBtn = document.getElementById('signUpBtn');
    const formTitle = document.getElementById('formTitle');
    const authForm = document.getElementById('authForm');
    const message = document.getElementById('message');
    let isSignIn = true;

    signInBtn.addEventListener('click', () => {
      isSignIn = true;
      updateForm();
    });
    signUpBtn.addEventListener('click', () => {
      isSignIn = false;
      updateForm();
    });

    function updateForm() {
      formTitle.textContent = isSignIn ? 'Sign In' : 'Sign Up';
      signInBtn.classList.toggle('active', isSignIn);
      signUpBtn.classList.toggle('active', !isSignIn);
      message.textContent = '';
    }

    authForm.addEventListener('submit', e => {
      e.preventDefault();
      message.textContent = '';

      const email = authForm.email.value.trim().toLowerCase();
      const password = authForm.password.value.trim();

      if (!email || !password) {
        message.textContent = 'Please fill all fields.';
        return;
      }

      let users = JSON.parse(localStorage.getItem('users') || '[]');

      if (isSignIn) {
        const user = users.find(u => u.email === email && u.password === password);
        if (user) {
          localStorage.setItem('loggedInUser', email);
          window.location.href = 'index.html';
        } else {
          message.textContent = 'Invalid email or password.';
        }
      } else {
        if (users.some(u => u.email === email)) {
          message.textContent = 'Email already registered. Please sign in.';
          return;
        }
        users.push({ email, password });
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('loggedInUser', email);
        window.location.href = 'index.html';
      }
    });
  </script>

</body>
</html>
